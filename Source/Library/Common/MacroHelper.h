#pragma once

#define MACRO_VA_ARGS_INDEX_RESQ() 31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0
#define MACRO_VA_ARGS_SIZE_IMPL(_0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14, _15, _16, _17, _18, _19, _20, _21, _22, _23, _24, _25, _26, _27, _28, _29, _30, _31, _N, ...) _N

#define MACRO_VA_ARGS_SIZE_AUX(...) MACRO_VA_ARGS_SIZE_IMPL(__VA_ARGS__)
#define MACRO_VA_ARGS_SIZE(...)     MACRO_VA_ARGS_SIZE_AUX(__VA_ARGS__, MACRO_VA_ARGS_INDEX_RESQ())

#define MACRO_CONCATENATE_AUX(x, y) x##y
#define MACRO_CONCATENATE(x, y) MACRO_CONCATENATE_AUX(x, y)

// no args
#define MACRO_FOR_EACH_VA_ARGS_AUX_0( FUNCTOR, ARG1     ) FUNCTOR(ARG1)
#define MACRO_FOR_EACH_VA_ARGS_AUX_1( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_0( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_2( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_1( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_3( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_2( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_4( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_3( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_5( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_4( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_6( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_5( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_7( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_6( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_8( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_7( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_9( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_8( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_10( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_9( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_11( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_10( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_12( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_11( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_13( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_12( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_14( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_13( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_15( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_14( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_16( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_15( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_17( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_16( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_18( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_17( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_19( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_18( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_20( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_19( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_21( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_20( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_22( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_21( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_23( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_22( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_24( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_23( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_25( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_24( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_26( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_25( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_27( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_26( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_28( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_27( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_29( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_28( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_30( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_29( FUNCTOR, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_AUX_31( FUNCTOR, ARG1, ...) FUNCTOR(ARG1) MACRO_FOR_EACH_VA_ARGS_AUX_30( FUNCTOR, __VA_ARGS__)

#define MACRO_FOR_EACH_VA_ARGS(FUNCTOR, ...) \
	MACRO_CONCATENATE(MACRO_FOR_EACH_VA_ARGS_AUX_, MACRO_VA_ARGS_SIZE(__VA_ARGS__))(FUNCTOR, __VA_ARGS__)

// 1 args
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_0( FUNCTOR, cARG1, ARG1     ) FUNCTOR(cARG1, ARG1)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_1( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_0( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_2( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_1( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_3( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_2( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_4( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_3( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_5( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_4( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_6( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_5( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_7( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_6( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_8( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_7( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_9( FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_8( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_10(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_9( FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_11(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_10(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_12(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_11(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_13(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_12(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_14(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_13(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_15(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_14(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_16(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_15(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_17(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_16(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_18(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_17(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_19(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_18(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_20(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_19(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_21(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_20(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_22(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_21(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_23(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_22(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_24(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_23(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_25(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_24(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_26(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_25(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_27(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_26(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_28(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_27(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_29(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_28(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_30(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_29(FUNCTOR, cARG1, __VA_ARGS__)
#define MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_31(FUNCTOR, cARG1, ARG1, ...) FUNCTOR(cARG1, ARG1) MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_30(FUNCTOR, cARG1, __VA_ARGS__)

#define MACRO_FOR_EACH_VA_ARGS_ARG1(FUNCTOR, ARG1, ...) \
	MACRO_CONCATENATE(MACRO_FOR_EACH_VA_ARGS_ARG1_AUX_, MACRO_VA_ARGS_SIZE(__VA_ARGS__))(FUNCTOR, ARG1, __VA_ARGS__)
